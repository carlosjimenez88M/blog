<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>
  
     infer 02 - Numerical inference Boostrap | 
    Un Data Scientist Dice
  
</title><meta name="description" content="Machine Learnign and Statistical modelling."><meta name="author" content="Daniel Jiménez">

<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png " sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0c344b">
<link rel="icon" href="/favicon.ico">


    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css">
    



    
        
            <link rel="stylesheet" href="/dist/main.37ab3f61b95417873748.min.css">
        
    




<link rel="canonical" href="https://danieljimenezm.com/post/2020-01-04-boostrap/"><meta property="og:title" content="infer 02 - Numerical inference Boostrap" />
<meta property="og:description" content="library(infer); library(tidyverse); ## ── Attaching packages ─────────── ## ✓ ggplot2 3.3.0 ✓ purrr 0.3.4 ## ✓ tibble 3.0.1 ✓ dplyr 0.8.99.9002 ## ✓ tidyr 1.0.2 ✓ stringr 1.4.0 ## ✓ readr 1.3.1 ✓ forcats 0.5.0 ## ── Conflicts ──────────────────── ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(emo); library(openintro); ## Please visit openintro.org for free statistics materials ## ## Attaching package: &#39;openintro&#39; ## The following object is masked from &#39;package:ggplot2&#39;: ## ## diamonds ## The following objects are masked from &#39;package:datasets&#39;: ## ## cars, trees theme_set(theme_classic()) Some approach Bootstrapping techniques  First : Bootstrap is a powerful method for statistical inference (with based on computational algorithms) that allows assigning measures of accuracy to sample estimates." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://danieljimenezm.com/post/2020-01-04-boostrap/" />

<meta itemprop="name" content="infer 02 - Numerical inference Boostrap">
<meta itemprop="description" content="library(infer); library(tidyverse); ## ── Attaching packages ─────────── ## ✓ ggplot2 3.3.0 ✓ purrr 0.3.4 ## ✓ tibble 3.0.1 ✓ dplyr 0.8.99.9002 ## ✓ tidyr 1.0.2 ✓ stringr 1.4.0 ## ✓ readr 1.3.1 ✓ forcats 0.5.0 ## ── Conflicts ──────────────────── ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(emo); library(openintro); ## Please visit openintro.org for free statistics materials ## ## Attaching package: &#39;openintro&#39; ## The following object is masked from &#39;package:ggplot2&#39;: ## ## diamonds ## The following objects are masked from &#39;package:datasets&#39;: ## ## cars, trees theme_set(theme_classic()) Some approach Bootstrapping techniques  First : Bootstrap is a powerful method for statistical inference (with based on computational algorithms) that allows assigning measures of accuracy to sample estimates.">

<meta itemprop="wordCount" content="878">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="infer 02 - Numerical inference Boostrap"/>
<meta name="twitter:description" content="library(infer); library(tidyverse); ## ── Attaching packages ─────────── ## ✓ ggplot2 3.3.0 ✓ purrr 0.3.4 ## ✓ tibble 3.0.1 ✓ dplyr 0.8.99.9002 ## ✓ tidyr 1.0.2 ✓ stringr 1.4.0 ## ✓ readr 1.3.1 ✓ forcats 0.5.0 ## ── Conflicts ──────────────────── ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(emo); library(openintro); ## Please visit openintro.org for free statistics materials ## ## Attaching package: &#39;openintro&#39; ## The following object is masked from &#39;package:ggplot2&#39;: ## ## diamonds ## The following objects are masked from &#39;package:datasets&#39;: ## ## cars, trees theme_set(theme_classic()) Some approach Bootstrapping techniques  First : Bootstrap is a powerful method for statistical inference (with based on computational algorithms) that allows assigning measures of accuracy to sample estimates."/>


    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    
</head>
<body>
    
<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top shadow-sm" id="navbar-main-menu">
    <div class="container">
        <a class="navbar-brand font-weight-bold" href="https://danieljimenezm.com">Un Data Scientist Dice</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-menu">
            <ul class="navbar-nav ml-auto">
                
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
                
            
            </ul>
        </div>
    </div>
</nav>


    
<main class="content-page container pt-7 pb-5">
    
    <div class="row">
        <div class="col">
            <article>
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="meta text-muted mb-3">
                            <p class="created text-muted text-uppercase font-weight-bold mb-1">January 1, 0001</p>
                            <span class="mr-2"><i class="fas fa-book-open mr-2"></i>878 words</span>
                            <span><i class="fas fa-clock mr-2"></i>5 mins read</span>
                        </div>

                        <h1>infer 02 - Numerical inference Boostrap</h1>

                        
                    </div>
                </div><div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="content">
                            


<pre class="r"><code>library(infer);
library(tidyverse);</code></pre>
<pre><code>## ── Attaching packages ───────────</code></pre>
<pre><code>## ✓ ggplot2 3.3.0           ✓ purrr   0.3.4      
## ✓ tibble  3.0.1           ✓ dplyr   0.8.99.9002
## ✓ tidyr   1.0.2           ✓ stringr 1.4.0      
## ✓ readr   1.3.1           ✓ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ────────────────────
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(emo);
library(openintro);</code></pre>
<pre><code>## Please visit openintro.org for free statistics materials</code></pre>
<pre><code>## 
## Attaching package: &#39;openintro&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     diamonds</code></pre>
<pre><code>## The following objects are masked from &#39;package:datasets&#39;:
## 
##     cars, trees</code></pre>
<pre class="r"><code>theme_set(theme_classic())</code></pre>
<div id="some-approach" class="section level1">
<h1>Some approach</h1>
<div id="bootstrapping-techniques" class="section level2">
<h2>Bootstrapping techniques</h2>
<ul>
<li><p>First : Bootstrap is a powerful method for statistical inference (with based on computational algorithms) that allows assigning measures of accuracy to sample estimates.</p></li>
<li>Second : It`s widely applied in other statistical inference such as
<ul>
<li>Confidence interval</li>
<li>Regression Models</li>
<li>Machine Learning</li>
</ul></li>
</ul>
<p>Some conceptions : i) Assume the data is representative, ii) use random sample with replacement to make inferences about the unknown population (statistical universe). iii) Calculate or compute robust statistics tools - mean, variance , error , median , etc through on samples. iv) repeat steps many times to creat bootstrap distribution</p>
<p>In this example , with iris , I generate bootstrap distribution for median.</p>
<pre class="r"><code>sepal_med_ci&lt;-iris%&gt;%
  specify(response = Sepal.Length )%&gt;% # Specify the variable of interes
  generate(reps = 100, type=&quot;bootstrap&quot;)%&gt;%
  calculate(stat = &quot;median&quot;)

sepal_med_ci%&gt;%
  head()%&gt;%
  knitr::kable(format = &#39;markdown&#39;, caption = &#39;Bootstrap Distribution for media&#39;)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">replicate</th>
<th align="right">stat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">5.7</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">5.9</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">5.8</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">5.7</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">5.7</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">5.8</td>
</tr>
</tbody>
</table>
<p>Now , is necessary generate histogram plot about this</p>
<pre class="r"><code>sepal_med_ci%&gt;%
  ggplot(aes(stat))+
  geom_histogram(bins = 10)+
  labs(title = &#39;Boostrap Distribution&#39;)+
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="/post/2020-01-04-Boostrap_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="percentile-and-standard-error-methods" class="section level2">
<h2>Percentile and Standard Error Methods</h2>
<p>Is necessary computing intervals for median <code>Sepal.length</code> using <a href="https://en.wikipedia.org/wiki/Percentile">percentile method</a></p>
<p>But first this step</p>
<pre class="r"><code>sepal_med_obs&lt;-iris%&gt;%
  summarize(Sepal_med = median(Sepal.Length))%&gt;%
  pull() # pull out value</code></pre>
<p>Computing freedom degrees</p>
<pre class="r"><code>degrees_of_freedom &lt;- nrow(iris) - 1</code></pre>
<p>Determinig the critical values</p>
<pre class="r"><code>t_star &lt;- qt(0.975, df=degrees_of_freedom)
print(t_star)</code></pre>
<pre><code>## [1] 1.976013</code></pre>
<p>Calculate the Confidence interval using std error method</p>
<pre class="r"><code>sepal_med_ci%&gt;%
  summarize(boot_se=sd(stat))%&gt;%
  summarize(
    u = sepal_med_obs - t_star * boot_se,
    l = sepal_med_obs + t_star * boot_se
  )</code></pre>
<pre><code>## # A tibble: 1 x 2
##       u     l
##   &lt;dbl&gt; &lt;dbl&gt;
## 1  5.62  5.98</code></pre>
<p>And recall the interval confindence the percentile method</p>
<pre class="r"><code>sepal_med_ci %&gt;%
  summarize(
    l = quantile(stat, 0.025),
    u = quantile(stat, 0.975)
  )</code></pre>
<pre><code>## # A tibble: 1 x 2
##       l     u
##   &lt;dbl&gt; &lt;dbl&gt;
## 1  5.65     6</code></pre>
<p>The standard error method is a better estimate.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Standard_deviation_diagram.svg/325px-Standard_deviation_diagram.svg.png" /></p>
<pre class="r"><code>visualize(sepal_med_ci,bins = 10)+
  shade_confidence_interval(endpoints =c(5.564156,6.035844))</code></pre>
<p><img src="/post/2020-01-04-Boostrap_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="re-centering-a-bootstrap-distribution" class="section level2">
<h2>Re-centering a bootstrap distribution</h2>
<p>Boostrap distribution are by design centered at the observed sample statistics. However since in a Hypothesis test we assume that the null hypothesis is true, we shift the bootstrap distribution to be centered at the null value.</p>
<p>The p-value is then defined as proportion of simulations that yield a sample statistic at least as favorable to the alternative hypothesis as observed sample statistics.</p>
<pre class="r"><code>n_replicates&lt;-300

sepal_med_ht &lt;- iris %&gt;%
  specify(response = Sepal.Length) %&gt;%
  hypothesize(null = &quot;point&quot;, med = 5.8) %&gt;% 
  generate(reps = n_replicates, type = &quot;bootstrap&quot;) %&gt;% 
  calculate(stat = &quot;median&quot;)

sepal_med_ht%&gt;%
  head()%&gt;%
  knitr::kable(caption = &quot;Generate 15000 bootstrap samples centered at null.&quot;)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-10">Table 1: </span>Generate 15000 bootstrap samples centered at null.</caption>
<thead>
<tr class="header">
<th align="right">replicate</th>
<th align="right">stat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">5.8</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">5.9</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">5.8</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">5.7</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">5.8</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">5.8</td>
</tr>
</tbody>
</table>
<p>Now Calculate the observed median Sepal</p>
<pre class="r"><code>sepal_med_obs &lt;- iris %&gt;%
  summarize(median_sepal = median(Sepal.Length)) %&gt;%
  pull()

print(sepal_med_obs)</code></pre>
<pre><code>## [1] 5.8</code></pre>
<p>Now Calculate the p-value as the proportion of bootstrap statistics greater than the observed statistic.</p>
<pre class="r"><code>sepal_med_ht %&gt;%
  # Filter for bootstrap stat greater than or equal to observed stat
  filter(stat &gt;= sepal_med_obs) %&gt;%
  # Calculate the p-value
  summarize(p_val = n() / n_replicates)</code></pre>
<pre><code>## # A tibble: 1 x 1
##   p_val
##   &lt;dbl&gt;
## 1 0.623</code></pre>
<p>Now one question : We would like to evaluate whether this data provides evidence that the median Sepal of Iris Sepal Length is greater than 5.8 cm. <strong>What is the conclusion of the hypothesis test at the 5% significance level?</strong></p>
<p>We dont have evidence that median Sepal Length in Iris is grater that 5.8. We fail to reject H0 since the p-value is above the significance level</p>
</div>
<div id="other-example" class="section level2">
<h2>Other example</h2>
<p>We’ll wrap up inference on a single parameter of a numerical distribution by revisiting the ncbirths dataset, specifically the weight variable, indicating the birth weight of the baby. Do these data provide convincing evidence that the average birth weight of babies born in North Carolina is different than 7 pounds?</p>
<pre class="r"><code>data(ncbirths)

n_replicates &lt;- 1500

weight_mean_ht &lt;- ncbirths %&gt;%
  specify(response = weight) %&gt;%
  hypothesize(null = &quot;point&quot;, mu = 7) %&gt;% 
  generate(reps = n_replicates, type = &quot;bootstrap&quot;) %&gt;% 
  calculate(stat = &quot;mean&quot;)


weight_mean_ht</code></pre>
<pre><code>## # A tibble: 1,500 x 2
##    replicate  stat
##  *     &lt;int&gt; &lt;dbl&gt;
##  1         1  7.08
##  2         2  7.01
##  3         3  7.00
##  4         4  7.00
##  5         5  6.93
##  6         6  6.95
##  7         7  6.97
##  8         8  7.03
##  9         9  7.04
## 10        10  7.00
## # … with 1,490 more rows</code></pre>
<p>Calculate the mean observed weight and pull out the value.</p>
<pre class="r"><code>weight_mean_obs &lt;- ncbirths %&gt;%
  summarize(mean_weight = mean(weight)) %&gt;%
  pull()</code></pre>
<p>Calculate the two-sided p-value.</p>
<pre class="r"><code>weight_mean_ht %&gt;%
  filter(stat &gt;= weight_mean_obs) %&gt;%
  summarize(
    one_sided_p_val = n() / n_replicates,
    two_sided_p_val = 2 * one_sided_p_val
  )</code></pre>
<pre><code>## # A tibble: 1 x 2
##   one_sided_p_val two_sided_p_val
##             &lt;dbl&gt;           &lt;dbl&gt;
## 1          0.0133          0.0267</code></pre>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<ul>
<li><p><a href="https://towardsdatascience.com/an-introduction-to-the-bootstrap-method-58bcb51b4d60" class="uri">https://towardsdatascience.com/an-introduction-to-the-bootstrap-method-58bcb51b4d60</a></p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Bootstrapping_(statistics)" class="uri">https://en.wikipedia.org/wiki/Bootstrapping_(statistics)</a></p></li>
</ul>
</div>
</div>

                        </div><ul class="share nav my-3 justify-content-end">
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fdanieljimenezm.com%2fpost%2f2020-01-04-boostrap%2f&text=infer%2002%20-%20Numerical%20inference%20Boostrap">
              <i class="fa-fw fab fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fdanieljimenezm.com%2fpost%2f2020-01-04-boostrap%2f&title=infer%2002%20-%20Numerical%20inference%20Boostrap">
                <i class="fa-fw fab fa-linkedin-in"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fdanieljimenezm.com%2fpost%2f2020-01-04-boostrap%2f&t=infer%2002%20-%20Numerical%20inference%20Boostrap">
                <i class="fa-fw fab fa-facebook-f"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://reddit.com/submit?url=https%3a%2f%2fdanieljimenezm.com%2fpost%2f2020-01-04-boostrap%2f&title=infer%2002%20-%20Numerical%20inference%20Boostrap">
                <i class="fa-fw fab fa-reddit-alien"></i>
            </a>
        </li>
    </nav>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        
                    </div>
                </div><div class="row justify-content-center my-3">
                    <div class="col-lg-8">
                        <div id="commento"></div>
                        <script src="https://commento.io"></script>
                    </div>
                </div></article>
        </div>
    </div>

    
</main>


    <footer class="footer text-center bg-dark py-6">
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="list-inline">
                    <li class="list-inline-item"><a href="https://danieljimenezm.com/index.xml" rel="alternate" type="application/rss+xml" class="icons d-block">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a></li><li class="list-inline-item">
                        <a href="mailto:cjimenez187@aol.com" class="icons d-block">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li><li class="list-inline-item">
                            <a href="https://github.com/carlosjimenez88M" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://www.linkedin.com/in/djimenezm/" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://twitter.com/DanielJimenezM9" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                </ul>

                <p class="text-muted">
                    
                        Copyright © 2020, Daniel Jiménez; all rights reserved.
                    
                </p>

                <p class="text-muted">
                Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with <a href="https://github.com/puresyntax71/hugo-theme-chunky-poster" target="_blank">Chunky Poster</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

    
    
        
            <script src="/dist/main.d608eadfe5ac0688902e.min.js"></script>
        
    



<script>
    window.Prism = window.Prism || {};
    window.Prism.manual = true;
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/autoloader/prism-autoloader.min.js"></script>






    
</body>
</html>
